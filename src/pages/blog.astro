---
import BlogHeader from "../features/blog/BlogHeader.astro";
import BlogLayout from "../layouts/BlogLayout.astro";
import BlogPreview from "../features/blog/BlogPreview.astro";
import CtaButton from "../ui/CtaButton.astro";
---

<div>
  <BlogLayout title="Artykuły prawne - Paulina Komenda"
    ><nav id="header" class={`sticky top-0 z-90 w-full transparent`}>
      <div class="max-w-[1600px] mx-auto px-5 sm:px-10">
        <div class="flex justify-between">
          <a href="/">
            <img
              src="/newLogo.svg"
              alt="logoKancelariaPaulinaKomenda"
              class="h-full max-h-[83px] w-full max-w-[298px] min-w-[230px] pt-[2.3vh] cursor-pointer"
              loading="eager"
            />
          </a>
          <div
            class="hidden lg:flex gap-12 2xl:gap-16 font-normal font-sans pt-2 items-center mix-blend-difference transition-colors"
          >
            <a
              href="#services"
              class="h-fit whitespace-nowrap font-semibold cursor-pointer nav-link hover:text-[#B58C67] active:text-[#333333] focus:border-[#533630]"
              aria-label="Usługi prawne">USŁUGI PRAWNE</a
            >
            <a
              href="#about"
              class="h-fit whitespace-nowrap font-semibold cursor-pointer nav-link hover:text-[#B58C67] active:text-[#333333] focus:border-[#533630]"
              aria-label="O mnie">O MNIE</a
            >
            <a
              href="#blog"
              class="h-fit whitespace-nowrap font-semibold cursor-pointer nav-link hover:text-[#B58C67] active:text-[#333333] focus:border-[#533630]"
              aria-label="Blog">BLOG</a
            >
            <a href="#contact" class="nav-link" aria-label="Kontakt">
              <CtaButton text="KONTAKT" variant="contain" />
            </a>
          </div>
          <div class="lg:hidden flex items-center">
            <button class="outline-none mobile-menu-button">
              <svg
                class="w-6 h-6 hamburger-icon"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
              <svg
                class="w-6 h-6 hidden close-icon"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <div id="section1" class="bg-red-500 h-screen w-full"></div>
    <div id="section2" class="bg-yellow-500 h-screen w-full"></div>
    <div id="section3" class="bg-green-500 h-screen w-full"></div>
    <div id="section4" class="bg-blue-500 h-screen w-full"></div>
  </BlogLayout>
</div>

<style>
  /* Change header color when in section 1 */
  .header-on-section1 {
    background-color: blue; /* Change to blue when in section 1 */
  }

  /* Other section colors can be added here as needed */
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const header = document.getElementById("header");
    const sections = document.querySelectorAll('div[id^="section"]'); // Select all sections

    // Define options for the Intersection Observer
    const options = {
      root: null, // Use the viewport as the root
      threshold: 0.99, // Trigger when at least 99% of the section is visible
    };

    // Create the observer
    const observer = new IntersectionObserver(function (entries) {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          // Remove any previous section classes from the header
          header.classList.remove("header-on-section1");

          // Add the class based on the section currently in view
          if (entry.target.id === "section1") {
            header.classList.add("header-on-section1"); // Change to blue for section 1
          }
        }
      });
    }, options);

    // Observe each section
    sections.forEach((section) => {
      observer.observe(section);
    });
  });
</script>
